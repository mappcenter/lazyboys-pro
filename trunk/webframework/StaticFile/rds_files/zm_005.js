var zmimConfig={method:1,defaultMethod:4,onOff:1,useCookie:true,exclude:["email","password"],showControl:true};var zmim=(function(){var F={TELEX:1,VNI:2,AUTO:3,OFF:4},S={ALL:"SFRXJDAWEOZ",DAWEO:"DAWEO",SFRXJ:"SFRXJ",S:"S",F:"F",R:"R",X:"X",J:"J",D:"D",W:"W",A:"A",E:"E",O:"O",AW:"W",Z:"Z"},P={ALL:"1234567890",DAWEO:"6789",SFRXJ:"12345",S:"1",F:"2",R:"3",X:"4",J:"5",D:"9",W:"7",A:"6",E:"6",O:"6",AW:"8",Z:"0"};var O=null,ac=null,r=false,V=false,I=false;var R=[97,226,259,101,234,105,111,244,417,117,432,121,65,194,258,69,202,73,79,212,416,85,431,89],X=[226,259,234,244,417,432,273,194,258,202,212,416,431,272],Q=["a","a","a","e","e","i","o","o","o","u","u","y","A","A","A","E","E","I","O","O","O","U","U","Y"],W=[225,7845,7855,233,7871,237,243,7889,7899,250,7913,253,193,7844,7854,201,7870,205,211,7888,7898,218,7912,221],U=[224,7847,7857,232,7873,236,242,7891,7901,249,7915,7923,192,7846,7856,200,7872,204,210,7890,7900,217,7914,7922],z=[7843,7849,7859,7867,7875,7881,7887,7893,7903,7911,7917,7927,7842,7848,7858,7866,7874,7880,7886,7892,7902,7910,7916,7926],e=[227,7851,7861,7869,7877,297,245,7895,7905,361,7919,7929,195,7850,7860,7868,7876,296,213,7894,7904,360,7918,7928],D=[7841,7853,7863,7865,7879,7883,7885,7897,7907,7909,7921,7925,7840,7852,7862,7864,7878,7882,7884,7896,7906,7908,7920,7924],b=[97,65,225,193,224,192,7843,7842,227,195,7841,7840],H=[259,258,7855,7854,7857,7856,7859,7858,7861,7860,7863,7862],L=[226,194,7845,7844,7847,7846,7849,7848,7851,7850,7853,7852],k=[111,79,243,211,242,210,7887,7886,245,213,7885,7884],w=[244,212,7889,7888,7891,7890,7893,7892,7895,7894,7897,7896],ae=[417,416,7899,7898,7901,7900,7903,7902,7905,7904,7907,7906],ad=[101,69,233,201,232,200,7867,7866,7869,7868,7865,7864],n=[234,202,7871,7870,7873,7872,7875,7874,7877,7876,7879,7878],K=[117,85,250,218,249,217,7911,7910,361,360,7909,7908],u=[432,431,7913,7912,7915,7914,7917,7916,7919,7818,7921,7920],m=[100,68],t=[273,272];var f;function p(){if(zmimConfig.useCookie){var af=30;zm.cookie("zme_InputMethod_On_Off",zmimConfig.onOff,{expires:af});zm.cookie("zme_InputMethod_Method",zmimConfig.method,{expires:af})}}function a(ai){var ag,aj,af="",ah=1;ag=ai.value;if(ag.length<=0){return false}if(!ai.setSelectionRange){return false}aj=ai.selectionStart;if(ai.selectionStart!=ai.selectionEnd){return["",aj]}while(true){if(aj-ah<0){break}else{if(c(ag.substr(aj-ah,1))){if(ag.substr(aj-ah,1)=="\\"){af=ag.substr(aj-ah,1)+af}break}else{af=ag.substr(aj-ah,1)+af}}ah++}return[af,aj]}function M(ag){var ah=ag.document.selection.createRange(),af="";if(ah.text){ah.text=""}else{while(true){ah.moveStart("character",-1);if(af.length==ah.text.length){break}af=ah.text;if(c(af.charAt(0))){if(af.charCodeAt(0)==13){af=af.substr(2)}else{if(af.charAt(0)!="\\"){af=af.substr(1)}}break}}}if(af.length){ah.collapse(false);ah.moveStart("character",-af.length);ag.cW=ah.duplicate();return ag.cW.text}else{return false}}function c(af){var ag=" \r\n#,\\;.:-_()<>+-*/=?!\"$%{}[]'~|^@&\t"+String.fromCharCode(160);return ag.indexOf(af)>=0}function G(ah){if(typeof ah!=="string"){return false}var ag="AEOUIY";ah=ah.toUpperCase();for(var af=0;af<ag.length;af++){if(ah==ag.charAt(af)){return true}}return false}function J(ah){if(typeof ah!=="string"){return false}var ag="QRTPSDGHKLXCVBNM";ah=ah.toUpperCase();for(var af=0;af<ag.length;af++){if(ah==ag.charAt(af)){return true}}return false}function E(ag,af){var ah;ac=ag;af=String.fromCharCode(af);if(zm.browser.msie){ah=M(ac);if(ah){aa(ah,af,0)}}else{ah=a(ac);if(ah){aa(ah[0],af,ah[1])}}}function aa(ak,ai,ah){var am=zmimConfig.method,ag=ai.toUpperCase();if(am==F.AUTO){if(S.ALL.indexOf(ag)>=0){O=S}else{if(P.ALL.indexOf(ag)>=0){O=P}}}if(!O){return}var al;if(O.SFRXJ.indexOf(ag)>=0){var aj=ab(ag);al=o(ak,ag,aj);g(ak,ag,al,ah,R,ab(ag))}else{if(ag==O.Z){al=o(ak,ag);A(ak,al,ah)}else{if(O.DAWEO.indexOf(ag)>=0){var af=j(ag);if(af){al=o(ak,ag,af[1],af[0]);g(ak,ag,al,ah,af[0],af[1])}}}}if(!c(ai)){x(ak,ai,ah)}}function o(ax,ah,ai,an){var ar=ax.length,au,at;if(ah==O.Z){var aw=d();for(au=0;au<ax.length;au++){for(at=0;at<aw.length;at++){if(ax.charCodeAt(au)==aw[at]){return[ar-au,T(ax.charAt(au))]}}}for(au=0;au<ax.length;au++){for(at=0;at<X.length;at++){if(ax.charCodeAt(au)==X[at]){return[ar-au,Z(ax.charAt(au))]}}}return false}var aq="",ag=N(),az=T(ax),ay=Z(az);for(au=0;au<ai.length;au++){if(isNaN(ai[au])){aq+=ai[au]}else{aq+=String.fromCharCode(ai[au])}}var al=0,am=ay.charAt(ar-1);if(G(am)){al=1}if(J(am)){al=2}if(al==0){return false}var ak="",aj;for(au=0;au<ar;au++){if(G(ay.charAt(au))){var ao=ay.toLowerCase();if(ao.charAt(au-1)!="g"||ao.charAt(au)!="i"||au==ar-1){ak+=ax.charAt(au)}}}aj=ax.indexOf(ak);if(aj==-1||ak.length>3){return false}var av=Z(T(ak.toUpperCase()));if(!y(av)){return false}if(O.SFRXJ.indexOf(ah)>=0&&O.SFRXJ.indexOf(am.toUpperCase())<0){if(ak.length==3){if(av=="UYE"){aj+=2}else{aj++}}else{if(ak.length==2){if(ax.toUpperCase().indexOf("Q")==0||(al==2)||av=="UE"||(av=="IA"&&ax.toUpperCase().indexOf("G")==0)){aj++}}}for(au=0;au<aq.length;au++){if(az.charAt(aj)==ag[au]){if(ax.charAt(aj)==aq.charAt(au)){return[ar-aj,az.charAt(aj)]}return ar-aj}}}else{if(O.DAWEO.indexOf(ah)>=0){var af="",ap;for(au=0;au<an.length;au++){af+=String.fromCharCode(an[au])}for(au=0;au<ax.length;au++){for(at=0;at<aq.length;at++){if(ax.charAt(0).toUpperCase()!="Q"&&av.indexOf("UO")==0&&(ah==O.W||ah==O.O)){V=true;return ar-aj}if(ax.charAt(0).toUpperCase()=="Q"&&av.indexOf("UO")==0){ap=aj+1}else{ap=au}if(ax.charAt(ap)==aq.charAt(at)){return[ar-ap,i(ax.charAt(ap))]}if(ax.charAt(ap)==af.charAt(at)){return ar-ap}}}}}return false}function y(ah){var ag=["AA","AE","EA","EE","EI","EY","OO","IO","II","IY","YA","YO","YU","YI","YY"];for(var af=0;af<ag.length;af++){if(ah.indexOf(ag[af])>=0){return false}}return true}function g(ag,ak,am,al,ao,an){var ai=ag.length,af,ah;if(am){if(am[1]){if(zm.browser.msie){q(ag,am[0],am[1])}else{l(ac,al-am[0],am[1])}}else{if(O.SFRXJ.indexOf(ak)>=0){ah=T(ag).charCodeAt(ai-am)}else{ah=ag.charCodeAt(ai-am)}for(var aj=0;aj<ao.length;aj++){if(ah==ao[aj]){af=an[aj];break}}if(V){af=v(ag.substr(ai-am,2),ak);V=false}if(zm.browser.msie){q(ag,am,af)}else{l(ac,al-am,af)}}}}function A(ag,ah,af){if(ah){if(zm.browser.msie){q(ag,ah[0],ah[1].charCodeAt(0))}else{l(ac,af-ah[0],ah[1].charCodeAt(0))}}}function x(ag,ao,al){var ap=d(),ah=ag.length,an,af,am=ag+ao;for(var ak=0;ak<ah;ak++){for(var aj=0;aj<ap.length;aj++){if(ag.charCodeAt(ak)==ap[aj]){an=o(am,O.S,ab(O.S));if(an&&!an[1]&&(ah+1-an)!=ak){af=String.fromCharCode(R[aj%24]);for(var ai=ak+1;ai<ah+1-an;ai++){af+=ag.charAt(ai)}for(var ai=0;ai<24;ai++){if(am.charCodeAt(ah+1-an)==R[ai]){af+=String.fromCharCode(ap[aj-(aj%24)+ai]);break}}if((ah+1-an)==(am.length-1)){I=true}if(zm.browser.msie){q(ag,ah-ak,af)}else{l(ac,al-ah+ak,af)}break}}}}}function T(ai){var ah=d();for(var ag=0;ag<ai.length;ag++){for(var af=0;af<ah.length;af++){if(ai.charCodeAt(ag)==ah[af]){ai=ai.substr(0,ag)+String.fromCharCode(R[af%24])+ai.substr(ag+1)}}}return ai}function Z(aj){var ag=R.concat(t),af=Q.concat(["d","D"]);for(var ai=0;ai<aj.length;ai++){for(var ah=0;ah<ag.length;ah++){if(aj.charCodeAt(ai)==ag[ah]){aj=aj.substr(0,ai)+af[ah]+aj.substr(ai+1)}}}return aj}function i(aj){var ag=L.concat(H,w,ae,u,n,t),af=b.concat(b,k,k,K,ad,m);for(var ai=0;ai<aj.length;ai++){for(var ah=0;ah<ag.length;ah++){if(aj.charCodeAt(ai)==ag[ah]){aj=aj.substr(0,ai)+String.fromCharCode(af[ah])+aj.substr(ai+1)}}}return aj}function l(ai,ak,ag){if(!ag){return}var ah="",aj=ai.selectionStart,af=ai.scrollTop;if(isNaN(ag)){ah=ag}else{ah=String.fromCharCode(ag);r=true}if(I){r=true;aj++;I=false}if(ah.length>0){ai.value=ai.value.substr(0,ak)+ah+ai.value.substr(ak+ah.length);ai.setSelectionRange(aj,aj);ai.scrollTop=af}}function q(ah,ai,af){if(!af){return}var ag="";if(isNaN(af)){ag=af}else{ag=String.fromCharCode(af);r=true}if(I){r=true;I=false}ac.cW.text=ah.substr(0,ah.length-ai)+ag+ah.substr(ah.length-ai+ag.length)}function v(ag,ak){var am,aj,ai,al="",ah,af;if(ak==O.O){if(T(ag.charAt(1).toUpperCase())==String.fromCharCode(212)){aj=K;am=k;r=false}else{aj=K;am=w;r=true}}else{if(ak==O.W){if(T(ag.toUpperCase())==String.fromCharCode(431,416)){aj=K;am=k;r=false}else{aj=u;am=ae;r=true}}}ah=i(ag.charAt(0)).charCodeAt(0);for(ai=0;ai<aj.length;ai++){if(ah==K[ai]){al+=String.fromCharCode(aj[ai]);break}}af=i(ag.charAt(1)).charCodeAt(0);for(ai=0;ai<am.length;ai++){if(af==k[ai]){al+=String.fromCharCode(am[ai]);break}}return al}function N(){var ag=[];for(var af=0;af<R.length;af++){ag[af]=String.fromCharCode(R[af])}return ag}function ab(af){if(af==O.S){return W}else{if(af==O.F){return U}else{if(af==O.R){return z}else{if(af==O.X){return e}else{if(af==O.J){return D}}}}}return[]}function d(ai){var ah=[],af;for(var ag=0;ag<O.SFRXJ.length;ag++){af=O.SFRXJ.charAt(ag);if(!ai||af!=ai.toUpperCase()){ah=ah.concat(ab(af))}}return ah}function j(af){if(af==O.D){return[m,t]}if(O==S){if(af==O.A){return[b.concat(H),L.concat(L)]}else{if(af==O.E){return[ad,n]}else{if(af==O.O){return[k.concat(ae),w.concat(w)]}else{if(af==O.W||af==O.AW){return[b.concat(L,k,w,K),H.concat(H,ae,ae,u)]}}}}}else{if(O==P){if(af==O.A||af==O.E||af==O.O){return[b.concat(H,ad,k,ae),L.concat(L,n,w,w)]}else{if(af==O.W){return[k.concat(w,K),ae.concat(ae,u)]}else{if(af==O.AW){return[b.concat(L),H.concat(H)]}}}}}}function C(ag){for(var af=0;af<zmimConfig.exclude.length;af++){if(ag.id==zmimConfig.exclude[af]){return true}}return false}function B(af){if(zmimConfig.onOff==0||zmimConfig.method==F.OFF||af==8){return false}return true}function Y(){zm("#zmchat-optionsList").after('<ul id="impanel" class="zmchat-vkeyList" style="display: none;">			<li><input id="imtelex" type="radio" class="checkBR" name="imswitchgroup" value="'+F.TELEX+'"><label for="imtelex">TELEX</label></li>			<li><input id="imvni" type="radio" class="checkBR" name="imswitchgroup" value="'+F.VNI+'"><label for="imvni">VNI</label></li>			<li><input id="imauto" type="radio" class="checkBR" name="imswitchgroup" value="'+F.AUTO+'" checked="checked"><label for="imauto">Auto</label></li>			<li><input id="imoff" type="radio" class="checkBR" name="imswitchgroup" value="'+F.OFF+'"><label for="imoff">Tắt bộ gõ</label></li>			<li class="vkeyinfo"><label><a id="iminfo" href="#"><em></em>Thông tin</a></label></li>		</ul>		<em id="imcontrol" title="Bộ gõ Tiếng Việt" class="zmchat-iconheader zmchat-switch-vietkey"><img width="28" height="26" src="http://'+zm.config.hostImage+'/images/blank.gif"></em>')}function h(){var af=zmimConfig.method;if(!zmimConfig.onOff){af=F.OFF}zm('#impanel input[value="'+af+'"]').attr("checked",true);zm("#imcontrol")[af==F.OFF?"addClass":"removeClass"]("disable_vkey")}function s(){zm("#imcontrol").unbindAll("click").click(function(){var ag=zm("#impanel");if(ag.css("display")!="none"){ag.hide()}else{var ai=zm("#imcontrol"),ah=zm(document.body).width()-ai.left()-ai.outerWidth();ag.show().addClass("hidden_vb");var af=ag.outerHeight();if(ai.offset().top<=af){ag.css("bottom",(-af+1)+"px")}else{ag.css("bottom","")}ag.css("right",ah+"px").removeClass("hidden_vb")}}).clickOutside(function(){zm("#impanel").hide()}).clickOutsideWith(zm("#impanel"));zm("#impanel input").unbindAll("click").click(function(){zmim.setMethod(this.value);zm("#impanel").hide()});zm("#iminfo").unbindAll("click").click(function(){zm.Boxy.alert('<div>Bộ gõ tiếng Việt dành cho <strong>Zing Me</strong>. Được phát triển từ bộ gõ <strong>AVIM</strong>.<div>Hướng dẫn sử dụng:<ul style="margin-left: 10px;"><li>- F8: Thay đổi kiểu gõ</li><li>- F9: Tắt bộ gõ</li></ul></div>',"Bộ gõ tiếng Việt");return false})}zm.ready(function(){Y();zmim.onSetMethod(function(ai){var ah="Bộ gõ Tiếng Việt";if(ai==F.AUTO){ah+=" (Auto)"}else{if(ai==F.OFF){ah+=" (Đã tắt)"}else{if(ai==F.TELEX){ah+=" (Telex)"}else{if(ai==F.VNI){ah+=" (VNI)"}}}}zm("#imcontrol").attr("title",ah)});setTimeout(function(){s();if(typeof zmChat!="undefined"){zmChat.onAttachButtons(s)}},1000);if(zmimConfig.useCookie){var af=zm.cookie("zme_InputMethod_Method");if(af===undefined){zmim.setMethod(zmimConfig.defaultMethod)}else{var ag=zm.intval(zm.cookie("zme_InputMethod_Method"));if(zm.intval(zm.cookie("zme_InputMethod_On_Off"))===0){ag=F.OFF}zmim.setMethod(ag)}}});return{setMethod:function(ag){if(isNaN(ag)||ag>zm.objectLength(F)||ag<1){return}zmimConfig.method=ag;zmim.turn((ag==F.OFF)?0:1);if(ag==F.TELEX){O=S}else{if(ag==F.VNI){O=P}else{O=null}}for(var ah=0,af;af=f[ah];ah++){af(ag)}},onSetMethod:function(af){if(!zm.isFunction(af)){return}if(!f){f=new Array()}if(zm.inArray(af,f)<0){f.push(af)}},turn:function(af){if(af>1){af=1}zmimConfig.onOff=af;p();zmimConfig.showControl&&h()},keypressHandler:function(ah){var ag,af;if(zm.browser.msie){ag=ah.srcElement;af=ah.keyCode}else{ag=ah.target;af=ah.which}if(C(ag)||ah.ctrlKey||ah.altKey){return}if((ag.type!="textarea"&&ag.type!="text")||!B(af)){return}E(ag,af);if(r){r=false;return false}return true},keydownHandler:function(ah){if(!zmim){return}var ag;if(zm.browser.msie){ag=ah.keyCode}else{ag=ah.which}var af=zm("#impanel");if(ag==123){zmimConfig.showControl&&af.toggle()}if(ag==120){zmim.turn((zmimConfig.onOff===0)?1:0)}if(ag==119){var ai=zmimConfig.method+1;ai=(ai>zm.objectLength(F))?1:ai;zmim.setMethod(ai)}}}})();zm.ready(function(){zm(document).keypress(zmim.keypressHandler);zm(document).keydown(zmim.keydownHandler)});