if(!window.ZME){window.ZME={_spId:"8bc3558acedf6b0822ef7159f9f262b3",_apiKey:null,_signedKey:null,_userStatus:"unknown",_signedExpire:null,_domain:{oauth:"http://oauth-me.zing.vn",sp:"http://sp.me.zing.vn",css:"http://css.me.zdn.vn",img:"http://img.me.zdn.vn",stc:"http://static.me.zing.vn",zme:"http://me.zing.vn"},getDomain:function(b){switch(b){case"oauth":return ZME._domain.oauth;case"sp":return ZME._domain.sp;case"css":return ZME._domain.css;case"img":return ZME._domain.img;case"stc":return ZME._domain.stc;case"zme":return ZME._domain.zingme}},copy:function(f,e,c,b){for(var d in e){if(c||typeof f[d]==="undefined"){f[d]=b?b(e[d]):e[d]}}return f},create:function(e,h){var g=window.ZME,b=e?e.split("."):[],k=b.length;for(var f=0;f<k;f++){var d=b[f];var j=g[d];if(!j){j=(h&&f+1==k)?h:{};g[d]=j}g=j}return g},provide:function(e,d,c){if(typeof e=="string"){e=ZME.create(e)}var b=ZME.copy(e,d,c);return b},guid:function(){return"zm"+(Math.random()*(1<<30)).toString(16).replace(".","")},log:function(b){if(ZME._logging){if(window.console){window.console.log(b)}else{if(window.Debug&&window.Debug.writeln){window.Debug.writeln(b)}}}},$:function(b){return document.getElementById(b)}}}ZME.provide("",{bind:function(){var b=Array.prototype.slice.call(arguments),d=b.shift(),c=b.shift();return function(){return d.apply(c,b.concat(Array.prototype.slice.call(arguments)))}},Class:function(b,c,d){if(ZME.CLASSES[b]){return ZME.CLASSES[b]}var e=c||function(){};e.prototype=d;e.prototype.bind=function(f){return ZME.bind(f,this)};e.prototype.constructor=e;ZME.create(b,e);ZME.CLASSES[b]=e;return e},subclass:function(b,d,c,e){if(ZME.CLASSES[b]){return ZME.CLASSES[b]}var f=ZME.create(d);ZME.copy(e,f.prototype);e._base=f;e._callBase=function(h){var g=Array.prototype.slice.call(arguments,1);return f.prototype[h].apply(this,g)};return ZME.Class(b,c?c:function(){if(f.apply){f.apply(this,arguments)}},e)},CLASSES:{}});ZME.provide("Type",{isType:function(c,b){while(c){if(c.constructor===b||c===b){return true}else{c=c._base}}return false}});ZME.Class("Obj",null,ZME.copy({setProperty:function(d,c){if(ZME.JSON.stringify(c)!=ZME.JSON.stringify(this[d])){this[d]=c;this.fire(d,c)}}},ZME.EventProvider));ZME.provide("UA",{ie:function(){return ZME.UA._populate()||this._ie},firefox:function(){return ZME.UA._populate()||this._firefox},opera:function(){return ZME.UA._populate()||this._opera},safari:function(){return ZME.UA._populate()||this._safari},chrome:function(){return ZME.UA._populate()||this._chrome},windows:function(){return ZME.UA._populate()||this._windows},osx:function(){return ZME.UA._populate()||this._osx},linux:function(){return ZME.UA._populate()||this._linux},ios:function(){ZME.UA._populate();return ZME.UA.mobile()&&this._ios},mobile:function(){ZME.UA._populate();return !ZME._inCanvas&&ZME.UA._enableMobile&&this._mobile},nativeApp:function(){return ZME.UA.mobile()&&navigator.userAgent.match(/ZMEAN\/\w+;/i)},android:function(){ZME.UA._populate();return ZME.UA.mobile()&&this._android},iPad:function(){ZME.UA._populate();return ZME.UA.mobile()&&this._iPad},_populated:false,_populate:function(){if(ZME.UA._populated){return}ZME.UA._populated=true;var e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(navigator.userAgent);var f=/(Mac OS X)|(Windows)|(Linux)/.exec(navigator.userAgent);var d=/\b(iPhone|iP[ao]d)/.exec(navigator.userAgent);ZME.UA._iPad=/\b(iPad)/.exec(navigator.userAgent);ZME.UA._android=navigator.userAgent.match(/Android/i);ZME.UA._mobile=d||ZME.UA._android||navigator.userAgent.match(/Mobile/i);if(e){ZME.UA._ie=e[1]?parseFloat(e[1]):NaN;if(ZME.UA._ie>=8&&!window.HTMLCollection){ZME.UA._ie=7}ZME.UA._firefox=e[2]?parseFloat(e[2]):NaN;ZME.UA._opera=e[3]?parseFloat(e[3]):NaN;ZME.UA._safari=e[4]?parseFloat(e[4]):NaN;if(ZME.UA._safari){e=/(?:Chrome\/(\d+\.\d+))/.exec(navigator.userAgent);ZME.UA._chrome=e&&e[1]?parseFloat(e[1]):NaN}else{ZME.UA._chrome=NaN}}else{ZME.UA._ie=ZME.UA._firefox=ZME.UA._opera=ZME.UA._chrome=ZME.UA._safari=NaN}if(f){ZME.UA._osx=!!f[1];ZME.UA._windows=!!f[2];ZME.UA._linux=!!f[3]}else{ZME.UA._osx=ZME.UA._windows=ZME.UA._linux=false}ZME.UA._ios=d}});ZME.provide("",{getLoginStatus:function(b,c){if(!ZME._apiKey){ZME.log("ZME.getLoginStatus() called before calling ZME.init().");return}if(b){if(!c&&ZME.Auth._loadState=="loaded"){b({status:ZME._userStatus,signedRequest:ZME._signedKey,expire:ZME._signedExpire});return}else{ZME.Event.subscribe("ZME.loginStatus",b)}}else{}if(!c&&ZME.Auth._loadState=="loading"){return}ZME.Auth._loadState="loading";var d=function(e){ZME.Auth._loadState="loaded";ZME.Event.fire("ZME.loginStatus",e);ZME.Event.clear("ZME.loginStatus")};ZME.ui({method:"login.status",display:"none"},d)},getSignedRequest:function(){return(ZME._signedKey&&ZME._signedKey)||null}});ZME.provide("Auth",{_callbacks:[],xdHandler:function(b,g,f,d,c,e){return ZME.UIServer._xdNextHandler(ZME.Auth.xdResponseWrapper(b,c,e),g,f,d)},xdResponseWrapper:function(f,e,d){return function(g){var h=g.signed_request?g.signed_request:null;var c=g.expires?g.expires:null;var b=g.signed_request?"connected":"unknowed";var i=ZME.Auth.setSession({status:b,signedRequest:h,expire:c},b);f&&f(i)}},setSession:function(i,d){var f=!ZME._signedKey&&i.signedRequest,c=ZME._signedKey&&!i.signedRequest,h=ZME._signedKey&&i.signedRequest&&ZME._signedKey!=i.signedRequest,b=f||c||(ZME._signedKey&&i.signedRequest&&ZME._signedKey!=i.signedRequest),g=d!=ZME._userStatus;var e=i;ZME._userStatus=i.status;ZME._signedKey=i.signedRequest;ZME._signedExpire=i.expire;if(g){ZME.Event.fire("auth.statusChange",e)}if(c||h){ZME.Event.fire("auth.logout",e)}if(f||h){ZME.Event.fire("auth.login",e)}if(b){ZME.Event.fire("auth.sessionChange",e)}if(ZME.Auth._refreshTimer){window.clearTimeout(ZME.Auth._refreshTimer);delete ZME.Auth._refreshTimer}if(ZME.Auth._loadState&&i.signedRequest&&i.expire){ZME.Auth._refreshTimer=window.setTimeout(function(){ZME.getLoginStatus(null,true)},1200000)}return e}});ZME.provide("UIServer.Methods",{"login.status":{url:ZME.getDomain("oauth")+"/oauth/sp",transform:function(b){var d=b.cb,c=b.id;delete b.cb;ZME.copy(b.params,{channel_url:ZME.Auth.xdHandler(d,c,"parent")});return b}}});ZME.provide("Content",{_root:null,_hiddenRoot:null,_callbacks:{},append:function(c,b){if(!b){if(!ZME.Content._root){ZME.Content._root=b=ZME.$("zme-root");if(!b){ZME.log('The "zme-root" div has not been created.');return}else{b.className+=" zme_reset"}}else{b=ZME.Content._root}}if(typeof c=="string"){var d=document.createElement("div");b.appendChild(d).innerHTML=c;return d}else{return b.appendChild(c)}},appendHidden:function(d){if(!ZME.Content._hiddenRoot){var b=document.createElement("div"),c=b.style;c.position="absolute";c.top="-10000px";c.width=c.height=0;ZME.Content._hiddenRoot=ZME.Content.append(b)}return ZME.Content.append(d,ZME.Content._hiddenRoot)},insertIframe:function(g){g.id=g.id||ZME.guid();g.name=g.name||ZME.guid();var c=ZME.guid(),e=false,b=false;ZME.Content._callbacks[c]=function(){if(e&&!b){b=true;g.onload&&g.onload(g.root.firstChild)}};if(document.attachEvent){var d=('<iframe id="'+g.id+'" name="'+g.name+'"'+(g.className?' class="'+g.className+'"':"")+' style="border:none;'+(g.width?"width:"+g.width+"px;":"")+(g.height>=0?"height:"+g.height+"px;":"")+'" src="'+g.url+'" frameborder="0" scrolling="no" allowtransparency="true" onload="ZME.Content._callbacks.'+c+'()"></iframe>');g.root.innerHTML='<iframe src="javascript:false" frameborder="0" scrolling="no" style="height:0px"></iframe>';e=true;window.setTimeout(function(){g.root.innerHTML=d;g.onInsert&&g.onInsert(g.root.firstChild)},0)}else{var f=document.createElement("iframe");f.id=g.id;f.name=g.name;f.onload=ZME.Content._callbacks[c];f.scrolling="no";f.style.border="none";f.style.overflow="hidden";if(g.className){f.className=g.className}if(g.height>=0){f.style.height=g.height+"px"}if(g.width){f.style.width=g.width+"px"}g.root.appendChild(f);e=true;f.src=g.url;if(g.onInsert){g.onInsert(f)}}},submitToTarget:function(f,d){var e=document.createElement("form");e.action=f.url;e.target=f.target;e.method=(d)?"GET":"POST";ZME.Content.appendHidden(e);ZME.Array.forEach(f.params,function(b,c){if(b!==null&&b!==undefined){var g=document.createElement("input");g.name=c;g.value=b;e.appendChild(g)}});e.submit();e.parentNode.removeChild(e)}});ZME.provide("Cookie",{_domain:null,_enabled:false,setEnabled:function(b){ZME.Cookie._enabled=b},getEnabled:function(){return ZME.Cookie._enabled},load:function(){var b=document.cookie.match("\\bzmes_"+ZME._apiKey+'="([^;]*)\\b'),c;if(b){c=ZME.QS.decode(b[1]);c.expires=parseInt(c.expires,10);ZME.Cookie._domain=c.base_domain}return c},loadSignedRequest:function(){var b=document.cookie.match("\\bzmesr_"+ZME._apiKey+"=([^;]*)\\b");if(!b){return null}return b[1]},setSignedRequestCookie:function(c,d){if(!ZME._oauth){throw new Error("ZME.Cookie.setSignedRequestCookie should only be used with OAuth2.")}if(!c){throw new Error("Value passed to ZME.Cookie.setSignedRequestCookie was empty.")}if(!ZME.Cookie.getEnabled()){return}ZME.Cookie.setRaw("zmesr_",c,d)},clearSignedRequestCookie:function(){if(!ZME._oauth){throw new Error("ZME.Cookie.setSignedRequestCookie should only be used with OAuth2.")}if(!ZME.Cookie.getEnabled()){return}ZME.Cookie.setRaw("zmesr_","",0)},setRaw:function(d,b,c){document.cookie="zmes_"+ZME._apiKey+'="'+d+'"'+(d&&b==0?"":"; expires="+new Date(b*1000).toGMTString())+"; path=/"+(c?"; domain=."+c:"");ZME.Cookie._domain=c},set:function(b){b?ZME.Cookie.setRaw(ZME.QS.encode(b),b.expires,b.base_domain):ZME.Cookie.clear()},clear:function(){ZME.Cookie.setRaw("",0,ZME.Cookie._domain)}});ZME.subclass("Dialog","Obj",function(b){this.id=b;if(!ZME.Dialog._dialogs){ZME.Dialog._dialogs={};ZME.Dialog._addOrientationHandler()}ZME.Dialog._dialogs[b]=this},{});ZME.provide("Dialog",{_dialogs:null,_lastYOffset:0,_loaderEl:null,_overlayEl:null,_stack:[],_active:null,_popStateListenerOn:false,_hideOnPopState:function(b){ZME.Dialog.hide(ZME.Dialog._stack.pop())},get:function(b){return ZME.Dialog._dialogs[b]},_findRoot:function(b){while(b){if(ZME.Dom.containsCss(b,"zme_dialog")){return b}b=b.parentNode}},_createWWWLoader:function(b){b=parseInt(b,10);b=b?b:460;return ZME.Dialog.create({content:('<div class="dialog_title">  <a id="zme_dialog_loader_close">    <div class="zme_dialog_close_icon"></div>  </a>  <span>Facebook</span>  <div style="clear:both;"></div></div><div class="dialog_content"></div><div class="dialog_footer"></div>'),width:b})},_createMobileLoader:function(){var b=ZME.UA.nativeApp()?"":('<table>  <tbody>    <tr>      <td class="header_left">        <label class="touchable_button">          <input type="submit" value="'+ZME.Intl._tx("Cancel")+'"            id="zme_dialog_loader_close"/>        </label>      </td>      <td class="header_center">        <div>'+ZME.Intl._tx("Loading...")+'</div>      </td>      <td class="header_right">      </td>    </tr>  </tbody></table>');return ZME.Dialog.create({classes:"loading"+(ZME.UA.iPad()?" centered":""),content:('<div class="dialog_header">'+b+"</div>")})},_restoreBodyPosition:function(){if(!ZME.UA.iPad()){var b=document.getElementsByTagName("body")[0];ZME.Dom.removeCss(b,"zme_hidden")}},_showIPadOverlay:function(){if(!ZME.UA.iPad()){return}if(!ZME.Dialog._overlayEl){ZME.Dialog._overlayEl=document.createElement("div");ZME.Dialog._overlayEl.setAttribute("id","zme_dialog_ipad_overlay");ZME.Content.append(ZME.Dialog._overlayEl,null)}ZME.Dialog._overlayEl.className=""},_hideIPadOverlay:function(){if(ZME.UA.iPad()){ZME.Dialog._overlayEl.className="hidden"}},showLoader:function(f,g){ZME.Dialog._showIPadOverlay();if(!ZME.Dialog._loaderEl){ZME.Dialog._loaderEl=ZME.Dialog._findRoot(ZME.UA.mobile()?ZME.Dialog._createMobileLoader():ZME.Dialog._createWWWLoader(g))}if(!f){f=function(){}}var h=ZME.$("zme_dialog_loader_close");ZME.Dom.removeCss(h,"zme_hidden");h.onclick=function(){ZME.Dialog._hideLoader();ZME.Dialog._restoreBodyPosition();ZME.Dialog._hideIPadOverlay();a()};var e=ZME.$("zme_dialog_ipad_overlay");if(e){e.ontouchstart=h.onclick}ZME.Dialog._makeActive(ZME.Dialog._loaderEl)},_hideLoader:function(){if(ZME.Dialog._loaderEl&&ZME.Dialog._loaderEl==ZME.Dialog._active){ZME.Dialog._loaderEl.style.top="-10000px"}},_makeActive:function(d){ZME.Dialog._setDialogSizes();ZME.Dialog._lowerActive();ZME.Dialog._active=d;var c=ZME.Canvas.getPageInfo(function(b){ZME.Dialog._centerActive(b)});ZME.Dialog._centerActive(c)},_lowerActive:function(){if(!ZME.Dialog._active){return}ZME.Dialog._active.style.top="-10000px";ZME.Dialog._active=null},_removeStacked:function(b){ZME.Dialog._stack=ZME.Array.filter(ZME.Dialog._stack,function(c){return c!=b})},_setDialogSizes:function(){if(!ZME.UA.mobile()||ZME.UA.iPad()){return}for(var d in ZME.Dialog._dialogs){if(document.getElementById(d)){var c=document.getElementById(d);c.style.width=ZME.UIServer.getDefaultSize().width+"px";c.style.height=ZME.UIServer.getDefaultSize().height+"px"}}},_handleOrientationChange:function(d){if(ZME.UA.android()&&screen.availWidth==ZME.Dialog._availScreenWidth){window.setTimeout(ZME.Dialog._handleOrientationChange,50);return}ZME.Dialog._availScreenWidth=screen.availWidth;if(ZME.UA.iPad()){ZME.Dialog._centerActive(ZME.Canvas.getPageInfo())}else{for(var c in ZME.Dialog._dialogs){if(document.getElementById(c)){document.getElementById(c).style.width=ZME.UIServer.getDefaultSize().width+"px"}}}},_addOrientationHandler:function(){if(!ZME.UA.mobile()){return}var b="onorientationchange" in window?"orientationchange":"resize";ZME.Dialog._availScreenWidth=screen.availWidth;ZME.Event.listen(window,b,ZME.Dialog._handleOrientationChange)},create:function(j){j=j||{};var l=document.createElement("div"),m=document.createElement("div"),h="zme_dialog";if(j.closeIcon&&j.onClose){var e=document.createElement("a");e.className="zme_dialog_close_icon";e.onclick=j.onClose;l.appendChild(e)}h+=" "+(j.classes||"");if(ZME.UA.ie()){h+=" zme_dialog_legacy";ZME.Array.forEach(["vert_left","vert_right","horiz_top","horiz_bottom","top_left","top_right","bottom_left","bottom_right"],function(c){var b=document.createElement("span");b.className="zme_dialog_"+c;l.appendChild(b)})}else{h+=(ZME.UA.mobile())?" zme_dialog_mobile":" zme_dialog_advanced"}if(j.content){ZME.Content.append(j.content,m)}l.className=h;var i=parseInt(j.width,10);if(!isNaN(i)){l.style.width=i+"px"}m.className="zme_dialog_content";l.appendChild(m);if(ZME.UA.mobile()){var k=document.createElement("div");k.className="zme_dialog_padding";l.appendChild(k)}ZME.Content.append(l);if(j.visible){ZME.Dialog.show(l)}return m},show:function(d){var c=ZME.Dialog._findRoot(d);if(c){ZME.Dialog._removeStacked(c);ZME.Dialog._hideLoader();ZME.Dialog._makeActive(c);ZME.Dialog._stack.push(c);if("zmeCallID" in d){ZME.Dialog.get(d.zmeCallID).fire("iframe_show")}if(!ZME.Event._popStateListenerOn){ZME.Event.listen(window,"popstate",ZME.Dialog._hideOnPopState);ZME.Event._popStateListenerOn=true}}},hide:function(d){var c=ZME.Dialog._findRoot(d);if(c==ZME.Dialog._active){ZME.Dialog._lowerActive();ZME.Dialog._restoreBodyPosition();ZME.Dialog._hideIPadOverlay();if("zmeCallID" in d){ZME.Dialog.get(d.zmeCallID).fire("iframe_hide")}if(ZME.Event._popStateListenerOn){ZME.Event.unlisten(window,"popstate",ZME.Dialog._hideOnPopState);ZME.Event._popStateListenerOn=false}}},remove:function(d){d=ZME.Dialog._findRoot(d);if(d){var c=ZME.Dialog._active==d;ZME.Dialog._removeStacked(d);if(c){ZME.Dialog._hideLoader();if(ZME.Dialog._stack.length>0){ZME.Dialog.show(ZME.Dialog._stack.pop())}else{ZME.Dialog._lowerActive();ZME.Dialog._restoreBodyPosition();ZME.Dialog._hideIPadOverlay()}}else{if(ZME.Dialog._active===null&&ZME.Dialog._stack.length>0){ZME.Dialog.show(ZME.Dialog._stack.pop())}}window.setTimeout(function(){d.parentNode.removeChild(d)},3000)}},isActive:function(d){var c=ZME.Dialog._findRoot(d);return c&&c===ZME.Dialog._active}});ZME.provide("EventProvider",{subscribers:function(){if(!this._subscribersMap){this._subscribersMap={}}return this._subscribersMap},subscribe:function(c,b){var d=this.subscribers();if(!d[c]){d[c]=[b]}else{d[c].push(b)}},unsubscribe:function(c,b){var d=this.subscribers()[c];ZME.Array.forEach(d,function(f,e){if(f==b){d[e]=null}})},monitor:function(c,e){if(!e()){var b=this,d=function(){if(e.apply(e,arguments)){b.unsubscribe(c,d)}};this.subscribe(c,d)}},clear:function(b){delete this.subscribers()[b]},fire:function(){var c=Array.prototype.slice.call(arguments),b=c.shift();ZME.Array.forEach(this.subscribers()[b],function(d){if(d){d.apply(this,c)}})}});ZME.provide("Event",ZME.EventProvider);ZME.provide("Flash",{_minVersions:[[9,0,159,0],[10,0,22,87],[10,3,181,34],[11,0,0]],_swfPath:"/sp/swf/zmexd-1.01.swf",_callbacks:[],_names:{},_unloadRegistered:false,init:function(){if(ZME.Flash._init){return}ZME.Flash._init=true;window.ZME_OnFlashXdCommReady=function(){ZME.Flash._ready=true;for(var c=0,b=ZME.Flash._callbacks.length;c<b;c++){ZME.Flash._callbacks[c]()}ZME.Flash._callbacks=[]};ZME.Flash.embedSWF("XdComm",ZME.getDomain("stc")+ZME.Flash._swfPath)},embedSWF:function(d,b,c){var h=!!document.attachEvent,e=('<object type="application/x-shockwave-flash" id="'+d+'" '+(c?'flashvars="'+c+'" ':"")+(h?'name="'+d+'" ':"")+(h?"":'data="'+b+'" ')+(h?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':"")+'allowscriptaccess="always"><param name="movie" value="'+b+'"></param><param name="allowscriptaccess" value="always"></param></object>');ZME.Content.appendHidden(e);if(ZME.UA.ie()>=9){if(!ZME.Flash._unloadRegistered){var g=function(){ZME.Array.forEach(ZME.Flash._names,function(f,j){var k=document.getElementById(j);if(k){k.removeNode(true)}})};window.attachEvent("onunload",g);ZME.Flash._unloadRegistered=true}ZME.Flash._names[d]=true}},hasMinVersion:function(){if(typeof ZME.Flash._hasMinVersion==="undefined"){var e,g,d,c=[];try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(b){if(navigator.mimeTypes.length>0){var h="application/x-shockwave-flash";if(navigator.mimeTypes[h].enabledPlugin){var f="Shockwave Flash";e=(navigator.plugins[f+" 2.0"]||navigator.plugins[f]).description}}}if(e){ZME.Flash._hasMinVersion=true}else{ZME.Flash._hasMinVersion=false}}return ZME.Flash._hasMinVersion},onReady:function(b){ZME.Flash.init();if(ZME.Flash._ready){window.setTimeout(b,0)}else{ZME.Flash._callbacks.push(b)}}});ZME.provide("JSON",{stringify:function(b){if(window.Prototype&&Object.toJSON){return Object.toJSON(b)}else{return JSON.stringify(b)}},parse:function(b){return JSON.parse(b)},flatten:function(d){var e={};for(var b in d){if(d.hasOwnProperty(b)){var c=d[b];if(null===c||undefined===c){continue}else{if(typeof c=="string"){e[b]=c}else{e[b]=ZME.JSON.stringify(c)}}}}return e}});ZME.provide("QS",{encode:function(e,b,c){b=b===undefined?"&":b;c=c===false?function(f){return f}:encodeURIComponent;var d=[];ZME.Array.forEach(e,function(g,f){if(g!==null&&typeof g!="undefined"){d.push(c(f)+"="+c(g))}});return d.join(b)},decode:function(j){var b=decodeURIComponent,d={},f=j.split("&"),g,e;for(g=0;g<f.length;g++){e=f[g].split("=");if(e&&e[0]){var c=e.slice(0,1);var h=e.slice(1,e.length);var k=h.join("=");d[b(c)]=b(k)}}return d}});ZME.provide("",{ui:function(e,b){if(!e.method){ZME.log('"method" is a required parameter for ZME.ui().');return null}var d=ZME.UIServer.prepareCall(e,b);if(!d){return null}var c=d.params.display;if(c==="dialog"){c="iframe"}else{if(c==="none"){c="hidden"}}var f=ZME.UIServer[c];if(!f){ZME.log('"display" must be one of "popup", "iframe" or "hidden".');return null}f(d);return d.dialog}});ZME.provide("UIServer",{Methods:{},_loadedNodes:{},_defaultCb:{},prepareCall:function(f,b){var d=f.method.toLowerCase(),h=ZME.copy({},ZME.UIServer.Methods[d]),g=ZME.guid();ZME.copy(f,{app_id:ZME._apiKey,sp_id:ZME._spId,sdk:"zme"});f.display=ZME.UIServer.getDisplayMode(h,f);var e={cb:b,id:g,url:h.url,params:f,name:d,size:h.size||{},dialog:new ZME.Dialog(g)};var c=h.transform;if(c){e=c(e);if(!e){return}}e=ZME.UIServer.prepareParams(e);return e},prepareParams:function(b){var c=ZME.QS.encode(b.params);if(c){b.url+="?"+c}return b},urlTooLongForIE:function(b){return b.length>2000},getDisplayMode:function(d,c){if(c.display==="hidden"||c.display==="none"){return c.display}if(ZME.Canvas.isTabIframe()&&c.display!=="popup"){return"async"}if(ZME.UA.mobile()||c.display==="touch"){return"touch"}if(!ZME.getAccessToken()&&c.display=="dialog"&&!d.loggedOutIframe){ZME.log('"dialog" mode can only be used when the user is connected.');return"popup"}if(d.connectDisplay&&!ZME._inCanvas){return d.connectDisplay}return c.display||(ZME.getAccessToken()?"dialog":"popup")},getXdRelation:function(b){var c=b.display;if(c==="popup"){return"opener"}if(c==="dialog"||c==="iframe"||c==="hidden"||c==="none"){return"parent"}},popup:function(k){var f=typeof window.screenX!="undefined"?window.screenX:window.screenLeft,d=typeof window.screenY!="undefined"?window.screenY:window.screenTop,j=typeof window.outerWidth!="undefined"?window.outerWidth:document.documentElement.clientWidth,h=typeof window.outerHeight!="undefined"?window.outerHeight:(document.documentElement.clientHeight-22),b=ZME.UA.mobile()?null:k.size.width,i=ZME.UA.mobile()?null:k.size.height,f=(f<0)?window.screen.width+f:f,e=parseInt(f+((j-b)/2),10),g=parseInt(d+((h-i)/2.5),10),c=[];if(b!==null){c.push("width="+b)}if(i!==null){c.push("height="+i)}c.push("left="+e);c.push("top="+g);c.push("scrollbars=1");if(k.name=="permissions.request"||k.name=="permissions.oauth"){c.push("location=1,toolbar=0")}c=c.join(",");if(k.post){ZME.UIServer.setLoadedNode(k,window.open("about:blank",k.id,c));ZME.Content.submitToTarget({url:k.url,target:k.id,params:k.params})}else{ZME.UIServer.setLoadedNode(k,window.open(k.url,k.id,c))}if(k.id in ZME.UIServer._defaultCb){ZME.UIServer._popupMonitor()}},setLoadedNode:function(d,c){ZME.UIServer._loadedNodes[d.id]=c;if(d.params){c.zmeCallID=d.id}},getLoadedNode:function(b){return ZME.UIServer._loadedNodes[b.id]},hidden:function(b){b.className="ZME_UI_Hidden";b.root=ZME.Content.appendHidden("");ZME.UIServer._insertIframe(b)},iframe:function(c){c.className="ZME_UI_Dialog";var b=function(){ZME.UIServer._triggerDefault(c.id)};c.root=ZME.Dialog.create({onClose:b,closeIcon:true,classes:(ZME.UA.iPad()?"centered":"")});if(!c.hideLoader){ZME.Dialog.showLoader(b,c.size.width)}ZME.Dom.addCss(c.root,"zme_dialog_iframe");ZME.UIServer._insertIframe(c)},_insertIframe:function(c){ZME.UIServer._loadedNodes[c.id]=false;var b=function(d){if(c.id in ZME.UIServer._loadedNodes){ZME.UIServer.setLoadedNode(c,d)}};if(c.post){ZME.Content.insertIframe({url:"about:blank",root:c.root,className:c.className,width:c.size.width,height:c.size.height,id:c.id,onInsert:b,onload:function(d){ZME.Content.submitToTarget({url:c.url,target:d.name,params:c.params})}})}else{ZME.Content.insertIframe({url:c.url,root:c.root,className:c.className,width:c.size.width,height:c.size.height,id:c.id,name:c.frameName,onInsert:b})}},_xdNextHandler:function(b,e,c,d){if(d){ZME.UIServer._defaultCb[e]=b}return ZME.XD.handler(function(f){ZME.UIServer._xdRecv(f,b)},c)+"&frame="+e},_xdRecv:function(d,c){var e=ZME.UIServer._loadedNodes[d.frame];try{if(ZME.Dom.containsCss(e,"ZME_UI_Hidden")){window.setTimeout(function(){e.parentNode.parentNode.removeChild(e.parentNode)},3000)}else{if(ZME.Dom.containsCss(e,"ZME_UI_Dialog")){}}}catch(b){}try{if(e.close){e.close();ZME.UIServer._popupCount--}}catch(f){}delete ZME.UIServer._loadedNodes[d.frame];delete ZME.UIServer._defaultCb[d.frame];c(d)},_xdResult:function(b,e,d,c){return(ZME.UIServer._xdNextHandler(function(f){b&&b(f.result&&f.result!=ZME.UIServer._resultToken&&JSON.parse(f.result))},e,d,c)+"&result="+encodeURIComponent(ZME.UIServer._resultToken))}});ZME.provide("XD",{_origin:null,_transport:null,_callbacks:{},_forever:{},_openerTransport:null,_openerOrigin:null,_nonOpenerOrigin:null,init:function(d){if(ZME.XD._origin){return}var b=(window.location.protocol+"//"+window.location.host+"/"+ZME.guid());if(window.postMessage){ZME.XD._origin=b;ZME.XD.PostMessage.init();ZME.XD._transport="postmessage"}else{if(!d&&ZME.Flash.hasMinVersion()){if(document.getElementById("zme-root")){ZME.XD._origin=b;ZME.XD.Flash.init();ZME.XD._transport="flash"}else{if(ZME.log){ZME.log("missing zme-root, defaulting to fragment-based xdcomm")}ZME.XD._transport="fragment";ZME.XD.Fragment._channelUrl=d||window.location.toString()}}else{ZME.XD._transport="fragment";ZME.XD.Fragment._channelUrl=d||window.location.toString()}}var c=!!window.attachEvent;if(ZME.XD._transport!="postmessage"&&c&&window.postMessage){ZME.XD._openerTransport=ZME.XD._transport;ZME.XD._openerOrigin=ZME.XD._origin;ZME.XD._nonOpenerOrigin=b}},resolveRelation:function(h){var g,e,f=h.split("."),d=window;for(var c=0,b=f.length;c<b;c++){g=f[c];if(g==="opener"||g==="parent"||g==="top"){d=d[g]}else{if(e=/^frames\[['"]?([a-zA-Z0-9-_]+)['"]?\]$/.exec(g)){d=d.frames[e[1]]}else{throw new SyntaxError("Malformed id to resolve: "+h+", pt: "+g)}}}return d},handler:function(b,c,f){var d=ZME._domain.stc+"/sp/xd_proxy-1.01.html#?=&",e=ZME.guid();if(ZME.XD._transport=="fragment"){}if(f){ZME.XD._forever[e]=true}ZME.XD._callbacks[e]=b;return d+ZME.QS.encode({cb:e,origin:ZME.XD._origin,relation:c||"opener",transport:ZME.XD._transport})},recv:function(c){if(typeof c=="string"){c=ZME.QS.decode(c)}var b=ZME.XD._callbacks[c.cb];if(!ZME.XD._forever[c.cb]){delete ZME.XD._callbacks[c.cb]}b&&b(c)},PostMessage:{init:function(){var b=ZME.XD.PostMessage.onMessage;if(window.addEventListener){window.addEventListener("message",b,false)}else{window.attachEvent("onmessage",b)}},onMessage:function(b){ZME.XD.recv(b.data)}},Flash:{init:function(){ZME.Flash.onReady(function(){var b=ZME.XD._openerOrigin?ZME.XD._openerOrigin:ZME.XD._origin;document.XdComm.postMessage_init("ZME.XD.Flash.onMessage",b)})},onMessage:function(b){ZME.XD.recv(decodeURIComponent(b))}},Fragment:{_magic:"fb_xd_fragment",checkAndDispatch:function(){var d=window.location.toString(),e=d.substr(d.indexOf("#")+1),f=d.indexOf(ZME.XD.Fragment._magic);if(f>0){ZME.init=ZME.getLoginStatus=ZME.api=function(){};document.documentElement.style.display="none";ZME.XD.resolveRelation(FB.QS.decode(e).relation).ZME.XD.recv(e)}}}});ZME.provide("Array",{indexOf:function(b,e){if(b.indexOf){return b.indexOf(e)}var d=b.length;if(d){for(var c=0;c<d;c++){if(b[c]===e){return c}}}return -1},merge:function(d,c){for(var b=0;b<c.length;b++){if(ZME.Array.indexOf(d,c[b])<0){d.push(c[b])}}return d},filter:function(d,f){var c=[];for(var e=0;e<d.length;e++){if(f(d[e])){c.push(d[e])}}return c},keys:function(e,d){var b=[];for(var c in e){if(d||e.hasOwnProperty(c)){b.push(c)}}return b},map:function(b,d){var c=[];for(var e=0;e<b.length;e++){c.push(d(b[e]))}return c},forEach:function(g,e,f){if(!g){return}if(Object.prototype.toString.apply(g)==="[object Array]"||(!(g instanceof Function)&&typeof g.length=="number")){if(g.forEach){g.forEach(e)}else{for(var d=0,b=g.length;d<b;d++){e(g[d],d,g)}}}else{for(var c in g){if(f||g.hasOwnProperty(c)){e(g[c],c,g)}}}},toArray:function(e){for(var d=0,c=[],b=e.length;d<b;d++){c[d]=e[d]}return c}});ZME.provide("Dom",{containsCss:function(d,b){var c=" "+d.className+" ";return c.indexOf(" "+b+" ")>=0},addCss:function(c,b){if(!ZME.Dom.containsCss(c,b)){c.className=c.className+" "+b}},removeCss:function(c,b){if(ZME.Dom.containsCss(c,b)){c.className=c.className.replace(b,"");ZME.Dom.removeCss(c,b)}},getByClass:function(e,g){g=g||document.body;if(g.getElementsByClassName){return ZME.Array.toArray(g.getElementsByClassName(e))}var f=g.getElementsByTagName("*"),c=[];for(var d=0,b=f.length;d<b;d++){if(this.containsCss(f[d],e)){c[c.length]=f[d]}}return c},getStyle:function(d,b){var e=false,c=d.style;if(b=="opacity"){if(c.opacity){return c.opacity*100}if(c.MozOpacity){return c.MozOpacity*100}if(c.KhtmlOpacity){return c.KhtmlOpacity*100}if(c.filters){return c.filters.alpha.opacity}return 0}else{if(d.currentStyle){ZME.Array.forEach(b.match(/\-([a-z])/g),function(f){b=b.replace(f,f.substr(1,1).toUpperCase())});e=d.currentStyle[b]}else{ZME.Array.forEach(b.match(/[A-Z]/g),function(f){b=b.replace(f,"-"+f.toLowerCase())});if(window.getComputedStyle){e=document.defaultView.getComputedStyle(d,null).getPropertyValue(b);if(b=="background-position-y"||b=="background-position-x"){if(e=="top"||e=="left"){e="0px"}}}}}return e},setStyle:function(e,b,d){var c=e.style;if(b=="opacity"){if(d>=100){d=99.999}if(d<0){d=0}c.opacity=d/100;c.MozOpacity=d/100;c.KhtmlOpacity=d/100;if(c.filters){c.filters.alpha.opacity=d}}else{c[b]=d}},addScript:function(c){var b=document.createElement("script");b.type="text/javascript";b.src=c;return document.getElementsByTagName("HEAD")[0].appendChild(b)},addCssRules:function(e,f){if(!ZME.Dom._cssRules){ZME.Dom._cssRules={}}var d=true;ZME.Array.forEach(f,function(g){if(!(g in ZME.Dom._cssRules)){d=false;ZME.Dom._cssRules[g]=true}});if(d){return}if(ZME.Dom.getBrowserType()!="ie"){var c=document.createElement("style");c.type="text/css";c.textContent=e;document.getElementsByTagName("HEAD")[0].appendChild(c)}else{try{document.createStyleSheet().cssText=e}catch(b){if(document.styleSheets[0]){document.styleSheets[0].cssText+=e}}}},getBrowserType:function(){if(!ZME.Dom._browserType){var d=window.navigator.userAgent.toLowerCase(),c=["msie","firefox","safari","gecko"],e=["ie","mozilla","safari","mozilla"];for(var b=0;b<c.length;b++){if(d.indexOf(c[b])>=0){ZME.Dom._browserType=e[b];break}}}return ZME.Dom._browserType},getViewportInfo:function(){var b=(document.documentElement&&document.compatMode=="CSS1Compat")?document.documentElement:document.body;return{scrollTop:b.scrollTop,scrollLeft:b.scrollLeft,width:self.innerWidth?self.innerWidth:b.clientWidth,height:self.innerHeight?self.innerHeight:b.clientHeight}},ready:function(b){if(ZME.Dom._isReady){b()}else{ZME.Event.subscribe("dom.ready",b)}}});(function(){function domReady(){ZME.Dom._isReady=true;ZME.Event.fire("dom.ready");ZME.Event.clear("dom.ready")}if(ZME.Dom._isReady||document.readyState=="complete"){return domReady()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",domReady,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",domReady)}}if(ZME.Dom.getBrowserType()=="ie"&&window===top){(function(){try{document.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return}domReady()})()}var oldonload=window.onload;window.onload=function(){domReady();if(oldonload){if(typeof oldonload=="string"){eval(oldonload)}else{oldonload()}}}})();ZME.provide("String",{trim:function(b){return b.replace(/^\s*|\s*$/g,"")},format:function(c){if(!ZME.String.format._formatRE){ZME.String.format._formatRE=/(\{[^\}^\{]+\})/g}var b=arguments;return c.replace(ZME.String.format._formatRE,function(g,d){var e=parseInt(d.substr(1),10),f=b[e+1];if(f===null||f===undefined){return""}return f.toString()})},quote:function(d){var b=/["\\\x00-\x1f\x7f-\x9f]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return b.test(d)?'"'+d.replace(b,function(e){var f=c[e];if(f){return f}f=e.charCodeAt();return"\\u00"+Math.floor(f/16).toString(16)+(f%16).toString(16)})+'"':'"'+d+'"'}});ZME.Class("XZMEML.Element",function(b){this.dom=b},ZME.copy({getAttribute:function(e,b,c){var f=ZME.XZMEML.getAttr(this.dom,e);return f?(c?c(f):f):b},_getBoolAttribute:function(b,c){if(ZME.XZMEML.getAttr(this.dom,b)===null){return c}return ZME.XZMEML.getBoolAttr(this.dom,b)},_getPxAttribute:function(c,b){return this.getAttribute(c,b,function(e){var d=parseInt(e.replace("px",""),10);if(isNaN(d)){return b}else{return d}})},_getAttributeFromList:function(c,b,d){return this.getAttribute(c,b,function(e){e=e.toLowerCase();if(ZME.Array.indexOf(d,e)>-1){return e}else{return b}})},isValid:function(){for(var b=this.dom;b;b=b.parentNode){if(b==document.body){return true}}},clear:function(){this.dom.innerHTML=""}},ZME.EventProvider));ZME.provide("XZMEML",{_renderTimeout:30000,getElements:function(f,g,b){var d=ZME.Array,e=ZME.XZMEML._getDomElements(f,g,b),c=ZME.Dom.getByClass(g+"-"+b,f);e=d.toArray(e);c=d.toArray(c);c=d.filter(c,function(h){return !h.hasChildNodes()||(h.childNodes.length===1&&h.childNodes[0].nodeType===3)});return d.merge(e,c)},parse:function(f,b){f=f||document.body;var e=1,c=function(){e--;if(e===0){b&&b();ZME.Event.fire("xzmeml.render")}};var d={};ZME.Array.forEach(ZME.XZMEML._tagInfos,function(j){if(!j.xmlns){j.xmlns="zme"}var g=ZME.XZMEML.getElements(f,j.xmlns,j.localName);for(var h=0;h<g.length;h++){e++;ZME.XZMEML._processElement(g[h],j,c)}});c()},getBoolAttr:function(c,b){b=ZME.XZMEML.getAttr(c,b);return(b&&ZME.Array.indexOf(["true","1","yes","on"],b.toLowerCase())>-1)},getAttr:function(c,b){return(c.getAttribute(b)||c.getAttribute(b.replace(/_/g,"-"))||c.getAttribute(b.replace(/-/g,"_"))||c.getAttribute(b.replace(/-/g,""))||c.getAttribute(b.replace(/_/g,""))||c.getAttribute("data-"+b)||c.getAttribute("data-"+b.replace(/_/g,"-"))||c.getAttribute("data-"+b.replace(/-/g,"_"))||c.getAttribute("data-"+b.replace(/-/g,""))||c.getAttribute("data-"+b.replace(/_/g,""))||null)},registerTag:function(b){ZME.XZMEML._tagInfos.push(b)},_processElement:function(dom,tagInfo,cb){var element=dom._element;if(element){element.subscribe("render",cb);element.process()}else{var processor=function(){var fn=eval(tagInfo.className);var isLogin=false;if((tagInfo.className==="ZME.XZMEML.LoginButton")){isLogin=true;fn=ZME.XZMEML.Login}element=dom._element=new fn(dom);element.subscribe("render",cb);element.process()};var classExists=ZME.CLASSES[tagInfo.className.substr(4)];if(classExists){processor()}else{ZME.log("Tag "+tagInfo.className+" was not found.")}}},_getDomElements:function(g,j,f){var i=j+":"+f;if(ZME.UA.firefox()){return g.getElementsByTagNameNS(document.body.namespaceURI,i)}else{if(ZME.UA.ie()<9){try{var h=document.namespaces;if(h&&h[j]){var e=g.getElementsByTagName(f);if(!document.addEventListener||e.length>0){return e}}}catch(d){}return g.getElementsByTagName(i)}else{return g.getElementsByTagName(i)}}},_tagInfos:[{localName:"login",className:"ZME.XZMEML.Login"},{localName:"login-button",className:"ZME.XZMEML.LoginButton"},{localName:"activity-box",className:"ZME.XZMEML.Activity"},{localName:"fan-box",className:"ZME.XZMEML.FanBox"},{localName:"profile-tweets",className:"ZME.XZMEML.ProfileTweets"},{localName:"follow-button",className:"ZME.XZMEML.FollowButton"},{localName:"hashtag",className:"ZME.XZMEML.HashTag"},{localName:"zads-zone",className:"ZME.XZMEML.Zads"},{localName:"quicknews",className:"ZME.XZMEML.QuickNews"}],_widgetPipeEnabledTagCount:0,_widgetPipeIsEnabled:function(){return ZME.widgetPipeEnabledApps&&ZME.widgetPipeEnabledApps[ZME._apiKey]!==undefined}});(function(){try{if(document.namespaces&&!document.namespaces.item.zme){document.namespaces.add("zme")}}catch(b){}}());ZME.subclass("XZMEML.IframeWidget","XZMEML.Element",null,{_iframeName:null,_showLoader:true,_refreshOnAuthChange:false,_allowReProcess:false,_fetchPreCachedLoader:false,_visibleAfter:"load",_widgetPipeEnabled:false,getUrlBits:function(){throw new Error("Inheriting class needs to implement getUrlBits().")},setupAndValidate:function(){return true},oneTimeSetup:function(){},getSize:function(){},getIframeName:function(){if(!this._iframeName&&this._widgetPipeEnabled&&ZME.XZMEML.shouldUseWidgetPipe()){this._iframeName=this.generateWidgetPipeIframeName();ZME.XZMEML.IframeWidget.allWidgetPipeIframes[this._iframeName]=this;if(ZME.XZMEML.IframeWidget.masterWidgetPipeIframe===null){ZME.XZMEML.IframeWidget.masterWidgetPipeIframe=this}}return this._iframeName},getIframeTitle:function(){},getChannelUrl:function(){if(!this._channelUrl){var b=this;this._channelUrl=ZME.XD.handler(function(c){b.fire("xd."+c.type,c)},"parent.parent",true)}return this._channelUrl},getIframeNode:function(){return this.dom.getElementsByTagName("iframe")[0]},arbiterInform:function(e,c,d){if(this.loaded){this._arbiterInform(e,c,d)}else{this.subscribe("iframe.onload",ZME.bind(this._arbiterInform,this,e,c,d))}},_arbiterInform:function(f,d,e){var g='parent.frames["'+this.getIframeNode().name+'"]';ZME.Arbiter.inform(f,d,g,window.location.protocol=="https:",e)},getDefaultWebDomain:function(){return"auth"},getDefaultStaticDomain:function(){return"cdn"},process:function(d){if(this._done){if(!this._allowReProcess&&!d){return}this.clear()}else{this._oneTimeSetup()}this._done=true;if(!this.setupAndValidate()){this.fire("render");return}if(this._showLoader){this._addLoader()}ZME.Dom.addCss(this.dom,"zme_iframe_widget");if(this._visibleAfter!="immediate"){ZME.Dom.addCss(this.dom,"zme_hide_iframes")}else{this.subscribe("iframe.onload",ZME.bind(this.fire,this,"render"))}var c=this.getSize()||{};var b=this.getFullyQualifiedURL();ZME.Content.insertIframe({url:b,root:this.dom.appendChild(document.createElement("span")),name:this.getIframeName(),title:this.getIframeTitle(),className:ZME._localeIsRtl?"zme_rtl":"zme_ltr",height:c.height,width:c.width,onload:ZME.bind(this.fire,this,"iframe.onload")});this.loaded=false;this.subscribe("iframe.onload",ZME.bind(function(){this.loaded=true},this))},getFullyQualifiedURL:function(){var b=this._getURL();if(!this._fetchPreCachedLoader){b+="?"+ZME.QS.encode(this._getQS())}if(b.length>2000){b="about:blank";var c=ZME.bind(function(){this._postRequest();this.unsubscribe("iframe.onload",c)},this);this.subscribe("iframe.onload",c)}return b},_oneTimeSetup:function(){this.subscribe("xd.resize",ZME.bind(this._handleResizeMsg,this));if(ZME.getLoginStatus){this.subscribe("xd.refreshLoginStatus",ZME.bind(ZME.getLoginStatus,ZME,function(){},true));this.subscribe("xd.logout",ZME.bind(ZME.logout,ZME,function(){}))}if(this._refreshOnAuthChange){this._setupAuthRefresh()}if(this._visibleAfter=="load"){this.subscribe("iframe.onload",ZME.bind(this._makeVisible,this))}this.oneTimeSetup()},_makeVisible:function(){this._removeLoader();ZME.Dom.removeCss(this.dom,"zme_hide_iframes");this.fire("render")},_setupAuthRefresh:function(){ZME.getLoginStatus(ZME.bind(function(b){var c=b.status;ZME.Event.subscribe("auth.statusChange",ZME.bind(function(d){if(!this.isValid()){return}if(c=="unknown"||d.status=="unknown"){this.process(true)}c=d.status},this))},this))},_handleResizeMsg:function(c){if(!this.isValid()){return}var b=this.getIframeNode();b.style.height=c.height+"px";if(c.width){b.style.width=c.width+"px"}b.style.border="none";this._makeVisible()},_addLoader:function(){if(!this._loaderDiv){ZME.Dom.addCss(this.dom,"zme_iframe_widget_loader");this._loaderDiv=document.createElement("div");this._loaderDiv.className="zme_loading";this.dom.appendChild(this._loaderDiv)}},_removeLoader:function(){if(this._loaderDiv){ZME.Dom.removeCss(this.dom,"zme_iframe_widget_loader");if(this._loaderDiv.parentNode){this._loaderDiv.parentNode.removeChild(this._loaderDiv)}this._loaderDiv=null}},_getQS:function(){return ZME.copy({app_id:ZME._apiKey,sdk:"zme",signed_request:ZME._signedKey},this.getUrlBits().params)},_getURL:function(){return ZME._domain.sp+"/plugins/"+this.getUrlBits().name},_postRequest:function(){ZME.Content.postTarget({url:this._getURL(),target:this.getIframeNode().name,params:this._getQS()})}});ZME.provide("XZMEML.IframeWidget",{});ZME.subclass("XZMEML.ButtonElement","XZMEML.Element",null,{_allowedSizes:["icon","small","medium","large","xlarge"],onClick:function(){throw new Error("Inheriting class needs to implement onClick().")},setupAndValidate:function(){return true},getButtonMarkup:function(){return this.getOriginalHTML()},getOriginalHTML:function(){return this._originalHTML},process:function(){if(!("_originalHTML" in this)){this._originalHTML=ZME.String.trim(this.dom.innerHTML)}if(!this.setupAndValidate()){this.fire("render");return}var c=this._getAttributeFromList("size","medium",this._allowedSizes),d="",b="";if(c=="icon"){d="zme_button_simple"}else{var e=ZME._localeIsRtl?"_rtl":"";b=this.getButtonMarkup();d="zme_button"+e+" zme_button_"+c+e}this.dom.innerHTML=('<a class="'+d+'"><span class="zme_button_text">'+b+"</span></a>");this.dom.firstChild.onclick=ZME.bind(this.onClick,this);this.fire("render")}});ZME.subclass("XZMEML.FanBox","XZMEML.IframeWidget",null,{_allowReProcess:true,setupAndValidate:function(){var b=this.getAttribute("pad-right");var c=this.getAttribute("pad-left");this._attr={channel:this.getChannelUrl(),profile:this.getAttribute("profile"),nof:this.getAttribute("numoffan"),pad_l:this.getAttribute("pad_left"),pad_r:this.getAttribute("pad_right"),width:this.getAttribute("width"),tpl:this.getAttribute("tpl")};this.clear();return true},oneTimeSetup:function(){this.subscribe("xd.fanbox",ZME.bind(this._handleFBRender,this));this.subscribe("xd.refreshfanbox",ZME.bind(this._handleFBRefresh,this))},getSize:function(){return{width:this._attr.width,height:0}},_handleFBRender:function(b){var c={height:b.height,width:this._attr.width};this._handleResizeMsg(c)},_handleFBRefresh:function(c){var b=this;ZME.getLoginStatus(function(d){b.process()},true)},getUrlBits:function(){return{name:"fanbox",params:this._attr}},_getURL:function(){return"http://sp.me.zing.vn/plugins/fanbox"}});ZME.subclass("XZMEML.ProfileTweets","XZMEML.IframeWidget",null,{setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),profile:this.getAttribute("profile"),not:this.getAttribute("numoftweet"),type:this.getAttribute("type"),width:this.getAttribute("width")};this.clear();return true},oneTimeSetup:function(){this.subscribe("xd.profiletweet",ZME.bind(this._handleFBRender,this))},getSize:function(){return{width:this._attr.width,height:0}},_handleFBRender:function(b){var c={height:b.height,width:this._attr.width};this._handleResizeMsg(b)},getUrlBits:function(){return{name:"profiletweet",params:this._attr}},_getURL:function(){return"http://sp.me.zing.vn/plugins/profiletweet"}});ZME.subclass("XZMEML.Facepile","XZMEML.IframeWidget",null,{_visibleAfter:"load",_extraParams:{},setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),max_rows:this.getAttribute("max-rows"),width:this._getPxAttribute("width",200)};this.clear();for(var b in this._extraParams){this._attr[b]=this._extraParams[b]}return true},setExtraParams:function(b){this._extraParams=b},oneTimeSetup:function(){var b=ZME._userStatus;ZME.Event.subscribe("auth.statusChange",ZME.bind(function(c){if(b=="connected"||c.status=="connected"){this.process(true)}b=c.status},this))},getSize:function(){return{width:this._attr.width,height:70}},getUrlBits:function(){return{name:"facepile",params:this._attr}}});ZME.subclass("XZMEML.Login","XZMEML.Facepile",null,{_visibleAfter:"load",getSize:function(){return{width:this._attr.width,height:94}},getUrlBits:function(){return{name:"login",params:this._attr}}});ZME.subclass("XZMEML.LoginButton","XZMEML.ButtonElement",null,{setupAndValidate:function(){if(this._alreadySetup){return true}this._alreadySetup=true;this._attr={status:"unknown"};return true},getButtonMarkup:function(){},_getLoginText:function(){return this._attr.length=="short"?ZME.Intl._tx("Log In"):ZME.Intl._tx("Log In with Zing Me")},onClick:function(){if(!this._attr.registration_url){if(!ZME.getAccessToken()||!this._attr.autologoutlink){ZME.login(ZME.bind(this._authCallback,this),{perms:this._attr.perms,scope:this._attr.scope})}else{ZME.logout(ZME.bind(this._authCallback,this))}}else{switch(this._attr.status){case"unknown":ZME.ui({method:"auth.logintoZingme"},ZME.bind(function(b){ZME.bind(ZME.getLoginStatus(this._saveStatus(this._authCallback,true),true),this)},this));break;case"notConnected":case"not_authorized":window.top.location=this._attr.registration_url;break;case"connected":if(!ZME.getAccessToken()||!this._attr.autologoutlink){this._authCallback()}else{ZME.logout(ZME.bind(this._authCallback,this))}break;default:ZME.log("Unknown status: "+this._attr.status)}}},_authCallback:function(b){ZME.Helper.invokeHandler(this.onlogin,this,[b])},_saveStatus:function(d,c){return ZME.bind(function(b){if(c&&this._attr.registration_url&&(this._attr.status=="notConnected"||this._attr.status=="not_authorized")&&(b.status=="notConnected"||b.status=="not_authorized")){window.top.location=this._attr.registration_url}this._attr.status=b.status;if(d){d=this.bind(d,this);return d(b)}},this)}});ZME.subclass("XZMEML.Activity","XZMEML.IframeWidget",null,{_visibleAfter:"load",_refreshOnAuthChange:false,_extraParams:{},setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),username:this.getAttribute("profile"),viewtype:this.getAttribute("viewtype"),numfeed:this.getAttribute("numfeed"),type:this.getAttribute("type"),width:this._getPxAttribute("width",400)};return true},getSize:function(){return{width:this._attr.width,height:70}},getUrlBits:function(){return{name:"activity",params:this._attr}}});ZME.subclass("XZMEML.FollowButton","XZMEML.IframeWidget",null,{_allowReProcess:true,setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),profile:this.getAttribute("profile")};this.clear();return true},oneTimeSetup:function(){this.subscribe("xd.follow",ZME.bind(this._handleFBRender,this));this.subscribe("xd.refreshFollower",ZME.bind(this._handleFBRefresh,this))},getSize:function(){return{width:this._attr.width,height:0}},_handleFBRender:function(b){var c={height:b.height,width:this._attr.width};this._handleResizeMsg(c)},_handleFBRefresh:function(c){var b=this;ZME.getLoginStatus(function(d){b.process()},true)},getUrlBits:function(){return{name:"fanbox",params:this._attr}},_getURL:function(){return"http://sp.me.zing.vn/plugins/follow/button"}});ZME.subclass("XZMEML.HashTag","XZMEML.IframeWidget",null,{_allowReProcess:true,setupAndValidate:function(){var b=this.getAttribute("pad-right");var c=this.getAttribute("pad-left");this._attr={channel:this.getChannelUrl(),not:this.getAttribute("not"),topic:this.getAttribute("topic"),width:this.getAttribute("width"),display:this.getAttribute("display")?this.getAttribute("display"):""};this.clear();return true},oneTimeSetup:function(){this.subscribe("xd.hashtag",ZME.bind(this._handleHashtagRender,this));this.subscribe("xd.refreshhashtag",ZME.bind(this._handleHashTagRefresh,this))},getSize:function(){return{width:this._attr.width?this._attr.width:this.getAttribute("width"),height:0}},_handleHashtagRender:function(b){var c={height:b.height,width:this._attr.width};this._handleResizeMsg(c)},_handleHashTagRefresh:function(c){var b=this;ZME.getLoginStatus(function(d){b.process()},true)},getUrlBits:function(){return{name:"hashtag",params:this._attr}},_getURL:function(){return"http://sp.me.zing.vn/plugins/hashtag"}});ZME.subclass("XZMEML.Zads","XZMEML.IframeWidget",null,{_visibleAfter:"load",_refreshOnAuthChange:false,_extraParams:{},setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),zid:this.getAttribute("zoneId"),width:this._getPxAttribute("width",304),height:this._getPxAttribute("height",-1)};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"zads",params:this._attr}},_getURL:function(){return"http://zads.me.zing.vn/view/"}});ZME.subclass("XZMEML.QuickNews","XZMEML.IframeWidget",null,{_allowReProcess:true,setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),cats:this.getAttribute("cats"),width:"672"};this.clear();return true},oneTimeSetup:function(){this.subscribe("xd.quicknews",ZME.bind(this._handleQuicknewsRender,this));this.subscribe("xd.refreshquicknews",ZME.bind(this._handleQuicknewsRefresh,this))},getSize:function(){return{width:this._attr.width?this._attr.width:this.getAttribute("width"),height:0}},_handleQuicknewsRender:function(b){var c={height:b.height,width:this._attr.width};this._handleResizeMsg(c)},_handleQuicknewsRefresh:function(c){var b=this;ZME.getLoginStatus(function(d){b.process()},true)},getUrlBits:function(){return{name:"news",params:this._attr}},_getURL:function(){return"http://sp.me.zing.vn/plugins/news"}});ZME.provide("",{initSitevars:{},init:function(c){c=ZME.copy(c||{},{logging:true,status:true});if(c.status=="false"){c.status=false}ZME._apiKey=c.appId||c.apiKey;if(!ZME._apiKey){return}if(!c.logging&&window.location.toString().indexOf("zme_debug=1")<0){ZME._logging=false}ZME.XD.init();var b=function(){window.setTimeout(function(){ZME.Dom.ready(ZME.XZMEML.parse)},0)};if(c.status){ZME.getLoginStatus(b)}else{b.apply()}}});window.setTimeout(function(){var b=/(static.me.zing.vn).*?#(.*)/;ZME.Array.forEach(document.getElementsByTagName("script"),function(e){if(e.src){var c=b.exec(e.src);if(c){var d=ZME.QS.decode(c[2]);ZME.Array.forEach(d,function(g,f){if(g=="0"){d[f]=0}});d.oauth=true;ZME.init(d)}}})},0);if(ZME.Dom&&ZME.Dom.addCssRules){ZME.Dom.addCssRules(".zme_loading{width:32px; height:32px; background:url(http://static.me.zing.vn/sp/images/zme_loading.gif) no-repeat 0 0;}\n.zme_ltr {overflow: hidden}",["zme_loading","zme_ltr"])};